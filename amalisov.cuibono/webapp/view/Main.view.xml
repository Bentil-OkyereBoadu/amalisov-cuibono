<mvc:View
    controllerName="amalisov.cuibono.controller.Main"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    core:require="{
		formatter: 'amalisov/cuibono/model/formatter'
	}"
>
    <Page
        title="{i18n>appTitle}"
        id="page"
    >
        <content>
		
            <Table
                id="productTable"
                class="sapUiResponsiveMargin  productTable"
                width="auto"
                items="{tranches>/Tranches}"
            >
                <headerToolbar>
                    <Toolbar class="sapUiSmallMarginBottom">
                        <Input
                            width="15%"
                            placeholder="{i18n>searchPlaceholder}"
                            id="input"
                            liveChange="onFilterInvoices"
                        />

                        <Select
                            width="15%"
                            autoAdjustWidth="true"
                            change=""
                        >
                            <core:ListItem
                                key="createdAt"
                                text="{i18n>runningStatus}"
                            />
                            <core:ListItem
                                key="upvotes"
                                text="{i18n>lockedStatus}"
                            />
                            <core:ListItem
                                key="upvotes"
                                text="{i18n>completedStatus}"
                            />
                        </Select>

                        <Select
                            width="15%"
                            autoAdjustWidth="true"
                            change=".onSortSelectChange"
                        >
                            <core:ListItem
                                key="createdAt"
                                text="{i18n>location1}"
                            />
                            <core:ListItem
                                key="upvotes"
                                text="{i18n>location2}"
                            />
                        </Select>

                        <Select
                            width="15%"
                            autoAdjustWidth="true"
                            change=".onSortSelectChange"
                        >
                            <core:ListItem
                                key="createdAt"
                                text="{i18n>year1}"
                            />
                            <core:ListItem
                                key="upvotes"
                                text="{i18n>year2}"
                            />
                        </Select>
                        <ToolbarSpacer />
                        <Button
                            text="{i18n>go}"
                            press=""
                            type="Emphasized"
                        />

                        <Button
                            text="{i18n>createTranche}"
                            press=".onCreateNewTranche"
                        />
                    </Toolbar>
                </headerToolbar>

				
                <columns>
                    <Column width="10%">
                        <Label text="{i18n>status}" />
                    </Column>
                    <Column>
                        <Label text="{i18n>trancheName}" />
                    </Column>
                    <Column>
                        <Label text="{i18n>trancheLocation}" />
                    </Column>
                    <Column>
                        <Label text="{i18n>startDate}" />
                    </Column>
                    <Column>
                        <Label text="{i18n>endDate}" />
                    </Column>
                    <Column width="6%"/>
                </columns>

                <items>
                    <ColumnListItem>
                        <Text text="{tranches>Status}" />
                        <Text text="{tranches>TrancheName}" />
                        <Text text="{tranches>Location}" />
                        <Text
                            text="{formatter: 'formatter.formatDate', path:'tranches>StartDate'}"
                            state="{= ${UnitsInStock} > 20 ? 'Success' : 'Error'}"
                        />
                        <Text
                            text="{formatter: 'formatter.formatDate', path:'tranches>EndDate'}"
                        />
                        <HBox>
                            <core:Icon
                                src="sap-icon://edit"
                                class="icon"
                                press=".onOpenEditDialog"
                                visible="{path: 'thread>IsDeleted', formatter: '.formatter.isVisible'}"
                            />
							<core:Icon
                                src="sap-icon://copy"
                                class="icon"
                                press=".onOpenEditDialog"
                            />
                            <core:Icon
                                src="sap-icon://delete"
                                press=".onDeleteAnswer"
                                class="icon"
                                visible="{path: 'thread>IsDeleted', formatter: '.formatter.isVisible'}"
                            />
                        </HBox>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>
